# üì¶Laravel API Orders

REST API –Ω–∞ **Laravel **, —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç–æ–µ –≤ **Docker**.  
–ü—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç –≤—ã–≥—Ä—É–∑–∫—É –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö –ø–æ —á–µ—Ç—ã—Ä–µ–º —Å—É—â–Ω–æ—Å—Ç—è–º:
- **–ü—Ä–æ–¥–∞–∂–∏ (Sales)**
- **–ó–∞–∫–∞–∑—ã (Orders)**
- **–°–∫–ª–∞–¥—ã (Stocks)**
- **–î–æ—Ö–æ–¥—ã (Incomes)**

–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ **—Å–µ–∫—Ä–µ—Ç–Ω–æ–º—É —Ç–æ–∫–µ–Ω—É**, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–º—É –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `key`.  
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç **JSON** —Å **–ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π** –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –¥–∞—Ç–µ.

---

## –°—Ç–µ–∫ 

- **PHP 8.2**
- **Laravel**
- **Laravel Octane (Swoole)**
- **MySQL**
- **Docker / docker-compose**

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

app/
‚îú‚îÄ‚îÄ DTOs/               # DTO-–æ–±—ä–µ–∫—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ Http/
‚îÇ   ‚îú‚îÄ‚îÄ Controllers/    # –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (Sales, Orders, Stocks, Incomes)
‚îÇ   ‚îú‚îÄ‚îÄ Middleware/     # ApiKeyAuth ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞
‚îú‚îÄ‚îÄ Models/             # –ú–æ–¥–µ–ª–∏ Eloquent
‚îî‚îÄ‚îÄ Services/           # –õ–æ–≥–∏–∫–∞ –±–∏–∑–Ω–µ—Å-—Å–ª–æ—è

---

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
   ```bash
   git clone https://github.com/dartanool/laravel-api-orders.git
   cd laravel-api-orders
2. –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª .env
    ```bash
    cp .env.example .env
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–æ—Å—Ç—É–ø—ã –∫ –ë–î –∏ –∫–ª—é—á API):
    ```bash
    DB_DATABASE=wbapi
    DB_USERNAME=wbuser
    DB_PASSWORD=wbpassword
    API_KEY=—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á
4. –ü–æ–¥–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
    ```bash
    docker-compose up -d --build
5. –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:
    ```bash
   docker exec -it php-fpm bash 
   php artisan migrate

---

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

1. –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä key —Å –≤–∞—à–∏–º —Ç–æ–∫–µ–Ω–æ–º:
    ```bash
    /api/sales?dateFrom=2025-10-01 12:00:00&dateTo=2025-10-23 12:00:00&page=1&limit=100&key=—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á

2. –ë–µ–∑ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
    ```bash
    {"error": "Unauthorized"}

---

## –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞

- –ü—Ä–æ–≤–µ—Ä–∫–∞ API –∫–ª—é—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ middleware ApiKeyAuth.
- DTO (–Ω–∞–ø—Ä–∏–º–µ—Ä, SaleDTO) —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Ö–æ–¥–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.
- –°–µ—Ä–≤–∏—Å—ã (SaleService, OrderService –∏ —Ç.–¥.) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.
- –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç JSON-–æ—Ç–≤–µ—Ç —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
